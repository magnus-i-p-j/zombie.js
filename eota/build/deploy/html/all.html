<link rel="stylesheet" type="text/css" href="../css/all.css"> 
<script id="character/icon-draggable" type="text/html">
<section class="icon">
  <img class="portrait"
       src="../img/portraits/placeholder.png"
       alt="Someone"
       data-bind="dragSource: $data"/>

  <div data-bind="text: name"></div>
</section>
</script>
<script id="character/medium-draggable" type="text/html">
<section class="character-medium">
  <div class="main">
    <img class="portrait" src="../img/portraits/placeholder.png" alt="Someone" data-bind="dragSource: $data"/>

    <div data-bind="text: name"></div>
  </div>
  <table class="attributes">
    <tr>
      <th class="attr-name">combat</th>
      <td class="attr-value" data-bind="text: combat"></td>
    </tr>
    <tr>
      <th class="attr-name">labour</th>
      <td class="attr-value" data-bind="text: labour"></td>
    </tr>
    <tr>
      <th class="attr-name">knowledge</th>
      <td class="attr-value" data-bind="text: knowledge"></td>
    </tr>
  </table>
  <div class="health-bar-vert">
    <div class="value" data-bind="style: {height: health()*100 + '%'}"></div>
  </div>

</section>
</script>
<script id="context_menu_widget" type="text/html">
<div data-bind="with: position">
  <div id="context_menu_widget" data-bind="style: {top: ( y - 5) + 'px', left: (x - 5) + 'px'}">
    <ul data-bind="foreach: $parent.actionFacets">
      <li data-bind="click: $parents[1].executeAction.bind($parents[1])">
        <span data-bind="text: name"></span>
      </li>
    </ul>
  </div>
</div>
</script>
<script id="current_selection_info/none" type="text/html">
<section class="panel">
  <header><h1>Nothing selected</h1></header>
</section>
</script>
<script id="current_selection_info/tile" type="text/html">
<section class="panel">
  <header><h1 data-bind="text: name"></h1></header>
  <section>
    <div data-bind="attr: { class: terrain()['base'] + ' image tile', 'data-x': x, 'data-y': y }"></div>
    <p data-bind="text: description"></p>
  </section>
  <footer>
    <div>(<span data-bind="text: x"></span>, <span data-bind="text: y"></span>)</div>
  </footer>
</section>
</script>
<script id="current_selection_info_widget" type="text/html">
<!-- ko template: { name:'current_selection_info/' + ( $data ? $data.category() : 'none') } -->
<!-- /ko -->
</script>
<script id="info_bar_widget" type="text/html">
<section class="panel">
  <header>Turn: <span data-bind="text: turn"></span> - <span data-bind="text: season"></span></header>
  <section>
    <!-- ko foreach: resources.resources -->
    <div class="resource">
      <span class="name" data-bind="text: name"></span>:
      <span class="amount" data-bind="text: amount"></span>
    </div>
    <!-- /ko -->
    <div class="resource">
      <span class="name">Characters</span>:
      <span class="amount" data-bind="text: unassignedCharacters.characters().length"></span>
    </div>
    <div class="resource">
      <span class="name">Points</span>:
      <span class="amount" data-bind="text: points"></span>
    </div>
  </section>
</section>
</script>
<script id="map_widget" type="text/html">
<div class="scrollable" id="map_scroll" >
  <div class="map_widget" >
    <div data-bind="foreach: visibleTiles">
      <div data-bind="attr: { class: terrain() + ' tile', 'data-x': x, 'data-y': y },
      style: {
        top: $parent.computeScreenPositionY($data),
        left: $parent.computeScreenPositionX($data)
      }">
        <div class="center_text">
          (<span data-bind="text: x"></span>, <span data-bind="text: y"></span>)
        </div>
      </div>
    </div>
    <div class="tile focusedTile"
         data-bind="visible: $root.currentTarget,
        style: {
          top: $root.currentTarget() ? computeScreenPositionY($root.currentTarget()) : 0,
          left: $root.currentTarget() ? computeScreenPositionX($root.currentTarget()) : 0
        }">
    </div>
  </div>
</div>
</script>
<script id="message/chatter" type="text/html">
<span class="time" data-bind="time: time"></span>
<!-- ko if: message.text -->
<span data-bind="markdown: message.text"></span>
<div>TODO: describe changes</div>
<!-- /ko -->
<pre data-bind="text: ko.toJSON($data);"></pre>

</script>
<script id="message/game_over" type="text/html">
<h1>Game Over!</h1>
<section data-bind="markdown: message.text"></section>
</script>
<script id="message/start_turn" type="text/html">
<span class="time" data-bind="time: time"></span>
<span data-bind="html: html"></span>

</script>
<script id="message_log_widget" type="text/html">
<ol class="message-list message-list-log" data-bind="foreach: messages">
  <!--ko if: tags.usual -->
  <!--<li data-bind="attr: {'class': class_tags.join(' ')}">-->
    <!--<span class="time" data-bind="time: time"></span>-->
    <!--<span data-bind="html: html"></span>-->
    <!--<pre data-bind="text: 'message/' + message.template"></pre>-->
    <!--<pre data-bind="text: ko.toJSON($data, null, 2);"></pre>-->
<!---->
  <!--</li>-->
  <li data-bind="template: {name: 'message/' + message.template, data: $data}, attr: {'class': class_tags.join(' ')}"></li>
  <!-- /ko -->
</ol>
</script>
<script id="modal_widget" type="text/html">
<!-- ko if: facet -->
<div class="modal-backdrop" data-bind="click: close">
  <div class="modal-close" data-bind="click: close">âœ—</div>
  <div class="modal-content"
       data-bind="template: {name: 'user_interface_facet/' + facet().template, data: facet},
       click: function(){}, clickBubble: false"></div>
</div>
<!-- /ko -->

</script>
<script id="project_list_widget" type="text/html">
<!-- ko foreach: projects -->
<section class="panel">
  <header><h1><span data-bind="text: name"></span> <span data-bind="text: completionPercent"></span>%</h1></header>
  <section>

    <!-- ko if: workforce.characters().length -->
    <span data-bind="text: workforce.characters()[0].name"></span>
    <!-- /ko -->


  </section>
  <footer>

  </footer>
</section>
<!-- /ko -->

</script>
<script id="toolbar_widget" type="text/html">
<div id="toolbar_widget" data-bind="foreach: actionFacets" class="btn-group">
  <button data-bind="click: execute, text: name, css: 'btn-'+$data.className" class="btn"></button>
</div>

</script>
<script id="user_interface_facet/default" type="text/html">
Default template, you used an "abstract" class.
</script>
<script id="user_interface_facet/message_log" type="text/html">
<ol data-bind="foreach: messages" class="message-list message-list-modal">
  <!--ko if: tags.important -->
  <li data-bind="template: {name: 'message/' + message.template, data: $data}, attr: {'class': class_tags.join(' ')}"></li>
  <!-- /ko -->
</ol>
</script>
<script id="user_interface_facet/project_management" type="text/html">
<section class="project-manager layout">
  <section class="all-projects layout" data-bind="foreach: projects.projects">
    <section class="panel drag-target" data-bind="dragTarget: $data">
      <header><h1><span data-bind="text: name"></span> <span data-bind="text: completionPercent"></span>%</h1></header>
      <section >
        <section data-bind="
          template: {
              name: 'character/icon-draggable',
              foreach: workforce.characters
           }">
        </section>
      </section>
    </section>
  </section>
  <section class="favorite-projects layout">
    <section class="panel">
      <header><h1><span>Secure area</span> <span>0</span>%</h1></header>
    </section>
  </section>
  <section class="unassigned-characters layout" data-bind="template: {name: 'character/medium-draggable', foreach: unassignedCharacters.characters}">

  </section>
  <section class="current-selection layout">
    <section class="panel">
      <header><h1>Tile</h1></header>
      <section>
        <div class="grass image tile"></div>
        <p>a tile</p>
      </section>
      <footer>
        <div>(<span>0</span>, <span>0</span>)</div>
      </footer>
    </section>
  </section>
  <section class="resources layout" data-bind="foreach: resources.resources">
    <div class="resource">
      <span class="name" data-bind="text: name"></span>:
      <span class="amount" data-bind="text: amount"></span>
    </div>
  </section>
</section>
</script>
<noscript>You might not have script enabled in your browser.</noscript>

<article id="z_client"
         class="game-container" style="display: none;" data-bind="visible: true">
  <section id="map" class="layout"></section>
  <div id="message-bar" class="layout">
    <section id="info-bar"
             data-bind="template: {name: 'info_bar_widget', data: infoFacet}">info_bar
    </section>
    <section id="message-log"
             data-bind="template: {name: 'message_log_widget', data: messageLogFacet}">
      message-log
    </section>
  </div>
  <section id="toolbar"
           class="toolbar layout"
           data-bind="template: {name: 'toolbar_widget', data: toolbarFacet}"></section>
  <section id="context_menu"
           class="context_menu"
           data-bind="template: {name: 'context_menu_widget', data: contextMenuFacet}"></section>
  <!-- ko template: {name: 'modal_widget', data: modalFacet} -->
  <!-- /ko -->
</article>



