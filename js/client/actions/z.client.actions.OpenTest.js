goog.provide('z.client.actions.OpenTest');
goog.require('goog.debug.Logger');


/**
 * @param {!mugd.injector.MicroFactory} services
 * @constructor
 * @implements {mugd.injector.IInjectable}
 * @extends {z.client.action.Action}
 */
z.client.actions.OpenTest = function(services) {
  goog.base(this, 'Open test modal');
  /**
   * @type {!z.client.facet.ModalFacet}
   * @private
   */
  this._modalFacet = /** @type {!z.client.facet.ModalFacet} */ services.get(z.client.Resources.MODAL_FACET);

  /** @type {!mugd.injector.Injector} */
  this.injector = /** @type {!mugd.injector.Injector} */ services.get(z.common.Resources.INJECTOR);

  this.meta = {
    'type': 'action_open_test',
    'category': z.common.rulebook.category.ACTION,
    'name': 'Open test',
    'description': 'Opens the test modal, commence gnawing'
  };
};
goog.inherits(z.client.actions.OpenTest, z.client.action.Action);

/**
 * @override
 */
z.client.actions.OpenTest.prototype._canExecuteInternal = function(args) {
  return true;
};

/**
 * @override
 */
z.client.actions.OpenTest.prototype._executeInternal = function(args) {
  var testFacet = this.injector.Compose(z.client.facet.UserInterfaceFacet).New();
  this._modalFacet['facet'](testFacet);
  this._logger.info('Create test facet');
};

/**
 * @type {!goog.debug.Logger}
 * @protected
 */
z.client.actions.OpenTest.prototype._logger = goog.debug.Logger.getLogger('z.client.actions.OpenTest');



