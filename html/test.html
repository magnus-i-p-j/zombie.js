<!DOCTYPE HTML>
<html>
<head>
  <title>Test</title>
  <link rel="stylesheet" href="../css/map.css"/>
</head>
<body>

<div data-bind="foreach: mapData" class="map">
  <div data-bind="foreach: $data" class="row">
    <div data-bind="attr: { class: terrainClass(), id: id()}">
      <div class="center_text">
        (<span data-bind="text: c"></span>, <span data-bind="text: r"></span>)
      </div>
    </div>
  </div>
</div>


<script type="text/javascript" src="../js/engine/z.engine.TrivialMap.js"></script>
<script type="text/javascript" src="../js/view/z.view.TrivialMapViewModel.js"></script>
<script type="text/javascript" src="../libs/knockout-2.0.0.debug.js"></script>
<script type="text/javascript" src="../libs/knockout.mapping-latest.debug.js"></script>
<script type="text/javascript" src="../libs/mootools-core-1.4.5-full-nocompat.js"></script>

<script type="text/javascript">

  var map = new z.engine.TrivialMap();
  map.feed([
    { c: 1, r: 2, terrain: 'grass' },
    { c: 2, r: 2, terrain: 'grass' },
    { c: 3, r: 2, terrain: 'grass' },
    { c: 1, r: 3, terrain: 'grass' },
    { c: 2, r: 3, terrain: 'grass' },
    { c: 1, r: 4, terrain: 'water' }
  ]);


  var trivialMapViewModel = new z.view.TrivialMapViewModel(map);
  trivialMapViewModel.load();
  ko.applyBindings(trivialMapViewModel);

  document.addEvent("domready", function (event) {

    var tiles = $$("div.row div");

    tiles.each(function (item, index) {
      item.addEvent("click", function () {
        console.log(item.id);
      });
    });

  });

  //    z.init = function(){
  //        var model = new z.engine.World();
  //        var map = new z.engine.BoundedMap(world);
  //        var commandHandler = new CommandHandler(world);
  //        var viewModel = new ViewModel(map, commandHandler);
  //        var view = new View(viewModel);
  //    }

</script>
</body>
</html>