/* interact.js v1.0.26 | https://raw.github.com/taye/interact.js/master/LICENSE */
!function(){"use strict";function e(){}function t(e){return!!e&&"object"==typeof e&&(/object|function/.test(typeof Element)?e instanceof Element:1===e.nodeType&&"string"==typeof e.nodeName)}function n(e){return e instanceof Object}function i(e){return e instanceof Array}function r(e){return"function"==typeof e}function o(e){return"number"==typeof e}function s(e){return"boolean"==typeof e}function a(e){return"string"==typeof e}function l(e,t){for(var n in t)e[n]=t[n];return e}function c(e){var t,n=l({},e);if(n.constructor=e.constructor,e.touches){for(n.touches=[],n.changedTouches=[],t=0;t<e.touches.length;t++)n.touches.push(l({},e.touches[t]));for(t=0;t<e.touches.length;t++)n.changedTouches.push(l({},e.changedTouches[t]))}return n}function d(e,t){h(t,Jt),e.pageX=Jt.x,e.pageY=Jt.y,g(t,Jt),e.clientX=Jt.x,e.clientY=Jt.y,e.timeStamp=(new Date).getTime()}function p(e,t,n){e.pageX=n.pageX-t.pageX,e.pageY=n.pageY-t.pageY,e.clientX=n.clientX-t.clientX,e.clientY=n.clientY-t.clientY,e.timeStamp=(new Date).getTime()-t.timeStamp;var i=Math.max(e.timeStamp/1e3,.001);e.pageSpeed=$t(e.pageX,e.pageY)/i,e.pageVX=e.pageX/i,e.pageVY=e.pageY/i,e.clientSpeed=$t(e.clientX,e.pageY)/i,e.clientVX=e.clientX/i,e.clientVY=e.clientY/i}function u(e,t,n){var i,r,o;return n=n||{},e=e||"page",/touch/.test(t.type)&&t.touches?(i=t.touches.length?t.touches[0]:t.changedTouches[0],r=i[e+"X"],o=i[e+"Y"]):(r=t[e+"X"],o=t[e+"Y"]),n.x=r,n.y=o,n}function h(e,t){return t=t||{},e instanceof V?/inertiastart/.test(e.type)?(h(Qt.pointerUp,t),t.x+=Qt.sx,t.y+=Qt.sy):(t.x=e.pageX,t.y=e.pageY):Cn?(u("screen",e,t),t.x+=window.scrollX,t.y+=window.scrollY):/gesture|inertia/i.test(e.type)?(u("client",e,t),t.x+=_t.documentElement.scrollLeft,t.y+=_t.documentElement.scrollTop):u("page",e,t),t}function g(e,t){return t=t||{},e instanceof V?/inertiastart/.test(e.type)?(g(Qt.pointerUp,t),t.x+=Qt.sx,t.y+=Qt.sy):(t.x=e.clientX,t.y=e.clientY):u(Cn?"screen":"client",e,t),t}function f(){return{x:window.scrollX||_t.documentElement.scrollLeft,y:window.scrollY||_t.documentElement.scrollTop}}function m(e){var t=/ipad|iphone|ipod/i.test(navigator.userAgent)?{x:0,y:0}:f(),n=e instanceof Dt?e.getBoundingClientRect():e.getClientRects()[0];return n&&{left:n.left+t.x,right:n.right+t.x,top:n.top+t.y,bottom:n.bottom+t.y,width:n.width||n.right-n.left,height:n.heigh||n.bottom-n.top}}function v(e){var t=[];return i(e)?(t[0]=e[0],t[1]=e[1]):"touchend"===e.type?1===e.touches.length?(t[0]=e.touches[0],t[1]=e.changedTouches[0]):0===e.touches.length&&(t[0]=e.changedTouches[0],t[1]=e.changedTouches[1]):(t[0]=e.touches[0],t[1]=e.touches[1]),t}function y(e){var t=v(e);return{pageX:(t[0].pageX+t[1].pageX)/2,pageY:(t[0].pageY+t[1].pageY)/2,clientX:(t[0].clientX+t[1].clientX)/2,clientY:(t[0].clientY+t[1].clientY)/2}}function x(e){if(e.touches&&e.touches.length||Gt.length){var t=v(e),n=Math.min(t[0].pageX,t[1].pageX),i=Math.min(t[0].pageY,t[1].pageY),r=Math.max(t[0].pageX,t[1].pageX),o=Math.max(t[0].pageY,t[1].pageY);return{x:n,y:i,left:n,top:i,width:r-n,height:o-i}}}function S(e){var t=(an&&an.options||un).deltaSource,n=t+"X",i=t+"Y",r=v(e),o=r[0][n]-r[1][n],s=r[0][i]-r[1][i];return $t(o,s)}function w(e,t){var n=(an&&an.options||un).deltaSource,i=n+"X",r=n+"Y",s=v(e),a=s[0][i]-s[1][i],l=s[0][r]-s[1][r],c=180*Math.atan(l/a)/Math.PI;if(o(t)){var d=c-t,p=d%360;p>315?c-=360+c/360|0:p>135?c-=180+c/360|0:-315>p?c+=360+c/360|0:-135>p&&(c+=180+c/360|0)}return c}function b(e,n){e=e||an;var i=e?e.options.origin:un.origin;return n=n||e._element,"parent"===i?i=n.parentNode:"self"===i&&(i=n),t(i)?(i=m(i),i.x=i.left,i.y=i.top):r(i)&&(i=i(e&&n)),i}function E(e){var t=e.target.options.inertia,n=t.resistance,i=-Math.log(t.endSpeed/e.v0)/n;e.x0=Ut.pageX,e.y0=Ut.pageY,e.t0=e.startEvent.timeStamp/1e3,e.sx=e.sy=0,e.modifiedXe=e.xe=(e.vx0-i)/n,e.modifiedYe=e.ye=(e.vy0-i)/n,e.te=i,e.lambda_v0=n/e.v0,e.one_ve_v0=1-t.endSpeed/e.v0}function z(){var e=Qt.target.options.inertia,t=e.resistance,n=(new Date).getTime()/1e3-Qt.t0;if(n<Qt.te){var i=1-(Math.exp(-t*n)-Qt.lambda_v0)/Qt.one_ve_v0;if(Qt.modifiedXe===Qt.xe&&Qt.modifiedYe===Qt.ye)Qt.sx=Qt.xe*i,Qt.sy=Qt.ye*i;else{var r=_(0,0,Qt.xe,Qt.ye,Qt.modifiedXe,Qt.modifiedYe,i);Qt.sx=r.x,Qt.sy=r.y}Z(Qt.startEvent),Qt.i=Rn(z)}else Qt.sx=Qt.modifiedXe,Qt.sy=Qt.modifiedYe,Z(Qt.startEvent),Qt.active=!1,gt(Qt.startEvent)}function X(){var e=(new Date).getTime()-Qt.t0,t=Qt.target.options.inertia.smoothEndDuration;t>e?(Qt.sx=T(e,0,Qt.xe,t),Qt.sy=T(e,0,Qt.ye,t),Z(Qt.startEvent),Qt.i=Rn(X)):(Qt.active=!1,Qt.smoothEnd=!1,Z(Qt.startEvent),gt(Qt.startEvent))}function Y(e,t,n,i){var r=1-e;return r*r*t+2*r*e*n+e*e*i}function _(e,t,n,i,r,o,s){return{x:Y(s,e,n,r),y:Y(s,t,i,o)}}function T(e,t,n,i){return e/=i,-n*e*(e-2)+t}function D(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1}function M(e,t){return e._context===_t||D(e._context,t)}function O(e,n){var i=e.options.ignoreFrom;return i&&t(n)&&n!==e._element.parentNode?a(i)?Et(n,i)||O(e,n.parentNode):t(i)?n===i||D(i,n):!1:!1}function C(e,n){var i=e.options.allowFrom;return i?t(n)&&n!==e._element.parentNode?a(i)?Et(n,i)||C(e,n.parentNode):t(i)?n===i||D(i,n):!1:!1:!0}function A(e,t){if(t){var n=t.options,i=n.preventDefault;if("auto"===i&&!/^input$|^textarea$/i.test(an._element.nodeName)){if(/down|start/i.test(e.type)&&"drag"===_n&&"xy"!==n.dragAxis)return;return void e.preventDefault()}return i===!0?void e.preventDefault():void 0}}function R(e,t){if(!t)return!1;var n=t.options.dragAxis;return"xy"===e||"xy"===n||n===e}function k(e,t){var n=e.options;return t=t||_n,/^resize/.test(t)&&(t="resize"),n.snapEnabled&&bt(n.snap.actions,t)}function $(e,t){var n=e.options;return t=t||_n,/^resize/.test(t)&&(t="resize"),n.restrictEnabled&&n.restrict[t]}function P(e){var n,i=[],r=[];for(e=e||an._element,n=0;n<tn.length;n++){var o=tn[n];if(!(t(o.options.accept)&&o.options.accept!==e||a(o.options.accept)&&!Et(e,o.options.accept))){o.selector&&(o._dropElements=o._context.querySelectorAll(o.selector));for(var s=0,l=o._dropElements.length;l>s;s++){var c=o._dropElements[s];c!==e&&(i.push(o),r.push(c))}}}return{dropzones:i,elements:r}}function N(e){var t,n,i,r;for(t=0;t<nn.dropzones.length;t++)n=nn.dropzones[t],i=nn.elements[t],i!==r&&(e.target=i,n.fire(e)),r=i}function F(e){var t,n,i,r,o,s=e[0],a=s?0:-1,l=[],c=[];for(r=1;r<e.length;r++)if(t=e[r],t&&t!==s)if(s){if(t.parentNode!==_t)if(s.parentNode!==_t){if(!l.length)for(n=s;n.parentNode&&n.parentNode!==_t;)l.unshift(n),n=n.parentNode;if(s instanceof Ct&&t instanceof Dt&&!(t instanceof Mt)){if(t===s.parentNode)continue;n=t.ownerSVGElement}else n=t;for(c=[];n.parentNode!==_t;)c.unshift(n),n=n.parentNode;for(o=0;c[o]&&c[o]===l[o];)o++;var d=[c[o-1],c[o],l[o]];for(i=d[0].lastChild;i;){if(i===d[1]){s=t,a=r,l=[];break}if(i===d[2])break;i=i.previousSibling}}else s=t,a=r}else s=t,a=r;return a}function q(e){var t=P(e,!0);nn.dropzones=t.dropzones,nn.elements=t.elements,nn.rects=[];for(var n=0;n<nn.dropzones.length;n++)nn.rects[n]=nn.dropzones[n].getRect(nn.elements[n])}function I(e,t){var n=[];bn&&q(t);for(var i=0;i<nn.dropzones.length;i++){var r=nn.dropzones[i],o=nn.elements[i],s=nn.rects[i];n.push(r.dropCheck(e,an,t,s)?o:null)}var a=F(n),l=nn.dropzones[a]||null,c=nn.elements[a]||null;return l&&l.selector&&(l._element=c),{dropzone:l,element:c}}function G(e,t){var n=null,i=null,r=null,o=null,s=null,a=null;return cn!==pn&&(dn&&(n=new V(e,"drag","leave",pn,t.target),n.draggable=t.interactable,t.dragLeave=pn,t.prevDropzone=dn),ln&&(i=new V(e,"drag","enter",cn,t.target),i.draggable=t.interactable,t.dragEnter=cn,t.dropzone=ln)),"dragend"===t.type&&ln&&(a=new V(e,"drop",null,cn,t.target),a.draggable=t.interactable,t.dropzone=ln),"dragstart"===t.type&&(r=new V(e,"drop","activate",null,t.target),r.draggable=t.interactable),"dragend"===t.type&&(o=new V(e,"drop","deactivate",null,t.target),o.draggable=t.interactable),"dragmove"===t.type&&ln&&(s={target:cn,relatedTarget:t.target,draggable:t.interactable,dragmove:t,type:"dropmove",timeStamp:t.timeStamp},t.dropzone=ln),{enter:i,leave:n,activate:r,deactivate:o,move:s,drop:a}}function V(e,t,n,i,r){var o,s,a=(an&&an.options||un).deltaSource,l=a+"X",c=a+"Y",d=an?an.options:un,p=b(an,i),u="start"===n,f="end"===n;if(i=i||an._element,"gesture"===t){var m=y(Gt);s={x:m.pageX-p.x,y:m.pageY-p.y},o={x:m.clientX-p.x,y:m.clientY-p.y}}else s=h(e),o=g(e),s.x-=p.x,s.y-=p.y,o.x-=p.x,o.y-=p.y,!k(an)||u&&d.snap.elementOrigin||(this.snap={range:hn.range,locked:hn.locked,x:hn.snappedX,y:hn.snappedY,realX:hn.realX,realY:hn.realY,dx:hn.dx,dy:hn.dy},hn.locked&&(s.x+=hn.dx,s.y+=hn.dy,o.x+=hn.dx,o.y+=hn.dy));if(!$(an)||u&&d.restrict.elementRect||!gn.restricted||(s.x+=gn.dx,s.y+=gn.dy,o.x+=gn.dx,o.y+=gn.dy,this.restrict={dx:gn.dx,dy:gn.dy}),this.pageX=s.x,this.pageY=s.y,this.clientX=o.x,this.clientY=o.y,this.x0=Ft.pageX,this.y0=Ft.pageY,this.clientX0=Ft.clientX,this.clientY0=Ft.clientY,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.button=e.button,this.target=i,this.t0=Vt,this.type=t+(n||""),this.interactable=an,Qt.active&&(this.detail="inertia"),r&&(this.relatedTarget=r),f||"drop"===t?"client"===a?(this.dx=o.x-Ft.clientX,this.dy=o.y-Ft.clientY):(this.dx=s.x-Ft.pageX,this.dy=s.y-Ft.pageY):"inertiastart"===n?(this.dx=Ut.dx,this.dy=Ut.dy):"client"===a?(this.dx=o.x-Ut.clientX,this.dy=o.y-Ut.clientY):(this.dx=s.x-Ut.pageX,this.dy=s.y-Ut.pageY),Ut&&"inertia"===Ut.detail&&!Qt.active&&d.inertia.zeroResumeDelta&&(Qt.resumeDx+=this.dx,Qt.resumeDy+=this.dy,this.dx=this.dy=0),"resize"===t?d.squareResize||e.shiftKey?("y"===zn?this.dx=this.dy:this.dy=this.dx,this.axes="xy"):(this.axes=zn,"x"===zn?this.dy=0:"y"===zn&&(this.dx=0)):"gesture"===t&&(this.touches=Rt?[Gt[0],Gt[1]]:e.touches,u?(this.distance=S(Gt),this.box=x(Gt),this.scale=1,this.ds=0,this.angle=w(Gt),this.da=0):f||e instanceof V?(this.distance=Ut.distance,this.box=Ut.box,this.scale=Ut.scale,this.ds=this.scale-1,this.angle=Ut.angle,this.da=this.angle-Zt.startAngle):(this.distance=S(Gt),this.box=x(Gt),this.scale=this.distance/Zt.startDistance,this.angle=w(Gt,Zt.prevAngle),this.ds=this.scale-Zt.prevScale,this.da=this.angle-Zt.prevAngle)),u)this.timeStamp=Vt,this.dt=0,this.duration=0,this.speed=0,this.velocityX=0,this.velocityY=0;else if("inertiastart"===n)this.timeStamp=(new Date).getTime(),this.dt=Ut.dt,this.duration=Ut.duration,this.speed=Ut.speed,this.velocityX=Ut.velocityX,this.velocityY=Ut.velocityY;else{this.timeStamp=(new Date).getTime(),this.dt=this.timeStamp-Ut.timeStamp,this.duration=this.timeStamp-Vt;var v,E,z;f||e instanceof V?(z=Math.max((f?this.duration:this.dt)/1e3,.001),v=this[l]-Ut[l],E=this[c]-Ut[c],this.snap&&this.snap.locked&&(v-=this.snap.dx,E-=this.snap.dy),this.restrict&&(v-=this.restrict.dx,E-=this.restrict.dy),Ut.snap&&Ut.snap.locked&&(v-=Ut[l]-Ut.snap.dx,E-=Ut[c]-Ut.snap.dy),Ut.restrict&&(v+=Ut.restrict.dx,E+=Ut.restrict.dy),this.speed=$t(v,E)/z,this.velocityX=v/z,this.velocityY=E/z):(this.speed=qt[a+"Speed"],this.velocityX=qt[a+"VX"],this.velocityY=qt[a+"VY"])}if((f||"inertiastart"===n)&&Ut.speed>600&&this.timeStamp-Ut.timeStamp<150){var X=180*Math.atan2(Ut.velocityY,Ut.velocityX)/Math.PI,Y=22.5;0>X&&(X+=360);var _=X>=135-Y&&225+Y>X,T=X>=225-Y&&315+Y>X,D=!_&&(X>=315-Y||45+Y>X),M=!T&&X>=45-Y&&135+Y>X;this.swipe={up:T,down:M,left:_,right:D,angle:X,speed:Ut.speed,velocity:{x:Ut.velocityX,y:Ut.velocityY}}}}function B(){this.originalEvent.preventDefault()}function U(e,t,n){var i,r={};l(r,e),r.preventDefault=B,r.stopPropagation=V.prototype.stopPropagation,r.stopImmediatePropagation=V.prototype.stopImmediatePropagation,r.timeStamp=(new Date).getTime(),r.originalEvent=e,r.dt=r.timeStamp-Vt,r.type="tap";var o=r.timeStamp-Lt,s=Kt&&"doubletap"!==Kt.type&&Kt.target===r.target&&500>o;for(Lt=r.timeStamp,i=0;i<t.length;i++){var a=b(t[i],n[i]);if(r.pageX-=a.x,r.pageY-=a.y,r.clientX-=a.x,r.clientY-=a.y,r.currentTarget=n[i],t[i].fire(r),r.immediatePropagationStopped||r.propagationStopped&&t[i+1]!==r.currentTarget)break}if(s){var c={};for(l(c,r),c.dt=o,c.type="doubletap",i=0;i<t.length&&(c.currentTarget=n[i],t[i].fire(c),!(c.immediatePropagationStopped||c.propagationStopped&&t[i+1]!==c.currentTarget));i++);Kt=c}else Kt=r}function L(e){function t(e,t,s){var a=Yt?s.querySelectorAll(t):void 0;o!==_t&&M(e,o)&&!O(e,r)&&C(e,r)&&Et(o,t,a)&&(n.push(e),i.push(o))}if(!Bt||!xn&&e instanceof Bt.constructor&&Bt.target===e.target){for(var n=[],i=[],r=e.target instanceof Ot?e.target.correspondingUseElement:e.target,o=r;o;)yt.isSet(o)&&(n.push(yt(o)),i.push(o)),en.forEachSelector(t),o=o.parentNode;n.length&&U(e,n,i)}}function K(e){var t,n,i=this.getRect(),r=null,o=h(e),s=this.options;return i?(Yn.resize&&s.resizable&&(t="y"!==s.resizeAxis&&o.x>i.right-vn,n="x"!==s.resizeAxis&&o.y>i.bottom-vn),zn=(t?"x":"")+(n?"y":""),r=zn?"resize"+zn:Yn.drag&&s.draggable?"drag":null,Yn.gesture&&It.length>=2&&!wn&&!En&&(r="gesture"),r):null}function j(e,t){if(!a(e))return null;t=t||an;var n=-1!==e.search("resize")?"resize":e,i=(t||an).options;return("resize"===n&&i.resizable||"drag"===e&&i.draggable||"gesture"===e&&i.gesturable)&&Yn[n]?(("resize"===e||"resizeyx"===e)&&(e="resizexy"),e):null}function W(e){function t(e,t,n){var o=Yt?n.querySelectorAll(t):void 0;M(e,r)&&!O(e,i)&&C(e,i)&&Et(r,t,o)&&(e._element=r,rn.push(e))}if(_n&&Bt&&e.type!==Bt.type)return void A(e,an);if(!(Bt&&"mousedown"===e.type&&"touchstart"===Bt.type&&e.timeStamp-Bt.timeStamp<300)){yn=!0;var n,i=e.target instanceof Ot?e.target.correspondingUseElement:e.target,r=i;if(et(e),Qt.active&&an.selector)for(;r&&r!==_t;){if(r===Qt.targetElement&&j(an.getAction(e))===_n)return kn(Qt.i),Qt.active=!1,void et(e,on);r=r.parentNode}if(!(wn||En||Sn)){if(rn.length&&/mousedown|pointerdown/i.test(e.type))n=dt(e,rn);else for(;r&&r!==_t&&!n;)rn=[],en.forEachSelector(t),n=dt(e,rn),r=r.parentNode;return n?(_n=n,H(e,n)):(Vt=(new Date).getTime(),Bt=c(e),d(Pt,e),xn=!1,void 0)}}}function H(e,t){if(!t&&yn&&Bt&&e.type!==Bt.type)return void A(e,an);if(yn=!0,et(e),(e.touches&&e.touches.length<2||It&&It.length<2)&&!an||!_n){var n=en.get(e.currentTarget);!O(n,e.target)&&C(n,e.target)&&(an=n)}var i=an&&an.options;if(an&&!(wn||En||Sn)){var r=j(t||an.getAction(e));if(d(Ft,e),Rt&&e instanceof Rt&&(an._gesture.target||(an._gesture.target=an._element),et(e,an._gesture)),!r)return e;i.styleCursor&&(_t.documentElement.style.cursor=Xn[r].cursor),zn="resizexy"===r?"xy":"resizex"===r?"x":"resizey"===r?"y":"","gesture"===r&&(e.touches&&e.touches.length<2||Rt&&It.length<2)&&(r=null),_n=r,hn.snappedX=hn.snappedY=gn.restrictedX=gn.restrictedY=0/0,Vt=(new Date).getTime(),Bt=c(e),d(Pt,e),xn=!1,A(e,an)}else Qt.active&&e.currentTarget===Qt.targetElement&&an===Qt.target&&j(an.getAction(e))===_n&&(kn(Qt.i),Qt.active=!1,Rt&&(an._gesture.target||(an._gesture.target=an._element),et(e,an._gesture)))}function J(e,t){var n,i,s,a,l,c,d,p,u,g,f=an.options.snap,m=f.anchors;if(t=t||hn,t.useStatusXY)n={x:t.x,y:t.y};else{var v=b(an);n=h(e),n.x-=v.x,n.y-=v.y}if(n.x-=Qt.resumeDx,n.y-=Qt.resumeDy,t.realX=n.x,t.realY=n.y,f.range<0&&(f.range=1/0),"path"===f.mode)for(m=[],u=0,g=f.paths.length;g>u;u++){var y=f.paths[u];r(y)&&(y=y(n.x,n.y)),m.push({x:o(y.x)?y.x:n.x,y:o(y.y)?y.y:n.y,range:o(y.range)?y.range:f.range})}if("anchor"!==f.mode&&"path"!==f.mode||!m.length){if("grid"===f.mode){var x=Math.round((n.x-f.gridOffset.x-Ht.x)/f.grid.x),S=Math.round((n.y-f.gridOffset.y-Ht.y)/f.grid.y),w=x*f.grid.x+f.gridOffset.x+Ht.x,E=S*f.grid.y+f.gridOffset.y+Ht.y;c=w-n.x,d=E-n.y,p=$t(c,d),a=p<f.range,l=w!==t.snappedX||E!==t.snappedY,t.snappedX=w,t.snappedY=E,t.dx=c,t.dy=d,t.range=f.range}}else{for(i={anchor:null,distance:0,range:0,dx:0,dy:0},u=0,g=m.length;g>u;u++){var z=m[u];s=o(z.range)?z.range:f.range,c=z.x-n.x+Ht.x,d=z.y-n.y+Ht.y,p=$t(c,d),a=s>p,1/0===s&&i.inRange&&1/0!==i.range&&(a=!1),(!i.anchor||(a?i.inRange&&1/0!==s?p/s<i.distance/i.range:p<i.distance:!i.inRange&&p<i.distance))&&(1/0===s&&(a=!0),i.anchor=z,i.distance=p,i.range=s,i.inRange=a,i.dx=c,i.dy=d,t.range=s)}a=i.inRange,l=i.anchor.x!==t.x||i.anchor.y!==t.y,t.snappedX=i.anchor.x,t.snappedY=i.anchor.y,t.dx=i.dx,t.dy=i.dy}return t.changed=l||a&&!t.locked,t.locked=a,t}function Q(e,n){var i,o=an&&an.options.restrict,s=o&&o[_n];if(!s)return n;n=n||gn,i=i=n.useStatusXY?{x:n.x,y:n.y}:h(e),n.snap&&n.snap.locked&&(i.x+=n.snap.dx||0,i.y+=n.snap.dy||0),i.x-=Qt.resumeDx,i.y-=Qt.resumeDy,n.dx=0,n.dy=0,n.restricted=!1;var a;"parent"===s?s=an._element.parentNode:"self"===s&&(s=an._element),t(s)?a=m(s):(r(s)&&(s=s(i.x,i.y,an._element)),a=s,"x"in s&&"y"in s&&(a={left:s.x,top:s.y,right:s.x+s.width,bottom:s.y+s.height}));var l=Math.max(Math.min(a.right-Wt.right,i.x),a.left+Wt.left),c=Math.max(Math.min(a.bottom-Wt.bottom,i.y),a.top+Wt.top);return n.dx=l-i.x,n.dy=c-i.y,n.changed=n.restrictedX!==l||n.restrictedY!==c,n.restricted=!(!n.dx&&!n.dy),n.restrictedX=l,n.restrictedY=c,n}function Z(e,t){if(yn){e instanceof V||d(Nt,e);var n,i;if(xn||(n=Nt.clientX-Ft.clientX,i=Nt.clientY-Ft.clientY,xn=$t(n,i)>un.pointerMoveTolerance),_n&&("mousemove"!==e.type||"touchstart"!==Bt.type)){if(xn&&(!Qt.active||e instanceof V&&/inertiastart/.test(e.type))){if(!(wn||En||Sn)&&(p(qt,Pt,Nt),"drag"===_n)){var r=Math.abs(n),o=Math.abs(i),s=an.options.dragAxis,a=r>o?"x":o>r?"y":"xy";if("xy"!==a&&"xy"!==s&&s!==a){_n=null;for(var l=e.target instanceof Ot?e.target.correspondingUseElement:e.target,c=l;c&&c!==_t;){var u=en.get(c);if(u&&u!==an&&"drag"===u.getAction(Bt)&&R(a,u)){_n="drag",an=u;break}c=c.parentNode}if(!_n){var h=function(e,t,n){var i=Yt?n.querySelectorAll(t):void 0;if(e!==an)return e._element=c,M(e,l)&&!O(e,l)&&C(e,l)&&Et(c,t,i)&&"drag"===e.getAction(Bt)&&R(a,e)?e:void 0};for(c=l;c&&c!==_t;){var g=en.forEachSelector(h);if(g){_n="drag",an=g;break}c=c.parentNode}}}}if(_n&&an){var f=k(an)&&(!an.options.snap.endOnly||t),m=$(an)&&(!an.options.restrict.endOnly||t),v=!(wn||En||Sn),y=v?Bt:e;if(v){Ut=Bt;var x=an.getRect(),S=an.options.snap,w=an.options.restrict;x?(jt.left=Ft.pageX-x.left,jt.top=Ft.pageY-x.top,jt.right=x.right-Ft.pageX,jt.bottom=x.bottom-Ft.pageY):jt.left=jt.top=jt.right=jt.bottom=0,x&&S.elementOrigin?(Ht.x=jt.left-x.width*S.elementOrigin.x,Ht.y=jt.top-x.height*S.elementOrigin.y):Ht.x=Ht.y=0,x&&w.elementRect?(Wt.left=jt.left-x.width*w.elementRect.left,Wt.top=jt.top-x.height*w.elementRect.top,Wt.right=jt.right-x.width*(1-w.elementRect.right),Wt.bottom=jt.bottom-x.height*(1-w.elementRect.bottom)):Wt.left=Wt.top=Wt.right=Wt.bottom=0}f?J(y):hn.locked=!1,m?Q(y):gn.restricted=!1;var b=(f?hn.changed||!hn.locked:!0)&&(m?!gn.restricted||gn.restricted&&gn.changed:!0);b&&(v&&(Ut=Xn[_n].start(Bt),f&&J(e),m&&Q(e)),Ut=Xn[_n].move(e))}}e instanceof V||(p(qt,Pt,Nt),d(Pt,e)),(wn||En)&&fn.edgeMove(e)}}}function et(e,t,n){if(n=n||e.type,/touch/.test(e.type))for(var i=/cancel|touchend/.test(n)?e.changedTouches:e.touches,r=0;r<i.length;r++)et(i[r],t,n);else if(!It.length||Gt[0].pointerType===e.pointerType){var o=e.pointerId||e.identifier||0;t&&t.addPointer(o);var s=wt(It,o);-1===s?(It.push(o),Gt[It.length-1]=e):Gt[s]=e}}function tt(e){var t=wt(It,e.pointerId||e.identifier||0);-1!==t&&It.splice(t,1)}function nt(e,t){var n=wt(It,e.pointerId||e.identifier||0);-1!==n&&(t=t||e.type,/move/i.test(t)?Gt[n]=e:/up|end|cancel/i.test(t)&&(tt(e),Sn&&an._gesture&&It.length<2&&an._gesture.stop()))}function it(e){for(var t=/cancel|touchend/.test(e.type)?e.changedTouches:e.touches,n=0;n<t.length;n++)nt(t[n],e.type)}function rt(e){var t=new V(e,"drag","start");wn=!0,an.fire(t),nn.dropzones=[],nn.elements=[],nn.rects=[],bn||q(an._element);var n=G(e,t);return n.activate&&N(n.activate),t}function ot(e){A(e,an);var t=new V(e,"drag","move"),n=an._element,i=I(t,n);ln=i.dropzone,cn=i.element,an._element=n;var r=G(e,t);return an.fire(t),r.leave&&dn.fire(r.leave),r.enter&&ln.fire(r.enter),r.move&&ln.fire(r.move),dn=ln,pn=cn,t}function st(e){var t=new V(e,"resize","start");return an.fire(t),an.fire(t),En=!0,t}function at(e){A(e,an);var t;return t=new V(e,"resize","move"),an.fire(t),t}function lt(e){var t=new V(e,"gesture","start");return t.ds=0,Zt.startDistance=Zt.prevDistance=t.distance,Zt.startAngle=Zt.prevAngle=t.angle,Zt.scale=1,Sn=!0,an.fire(t),t}function ct(e){if(!It.length)return Ut;A(e,an);var t;return t=new V(e,"gesture","move"),t.ds=t.scale-Zt.scale,an.fire(t),Zt.prevAngle=t.angle,Zt.prevDistance=t.distance,1/0===t.scale||null===t.scale||void 0===t.scale||isNaN(t.scale)||(Zt.scale=t.scale),t}function dt(e,t){for(var n=0,i=t.length;i>n;n++){var r=t[n],o=j(r.getAction(e,r),r);if(o)return an=r,o}}function pt(e){function t(e,t){e&&M(e,r)&&!O(e,r)&&C(e,r)&&Et(r,t)&&(e._element=r,n.push(e))}if(!_n){var n=[],i=an&&an._element,r=e.target instanceof Ot?e.target.correspondingUseElement:e.target;!an||!O(an,r)&&C(an,r)||(an=null,rn=[]);var o=en.get(r),s=o&&!O(o,r)&&C(o,r)&&j(o.getAction(e),o);if(s)an=o,rn=[];else if(en.forEachSelector(t),dt(e,n))rn=n,ht(e,rn),qn.addToElement(r,"mousemove",ht);else if(an){var a=i.querySelectorAll("*");if(bt(a,r)){for(var l=0;l<rn.length;l++)rn[l]._element=i;ht(e,rn),qn.addToElement(an._element,"mousemove",ht)}else an=null,rn=[]}}}function ut(e){if(!_n){var t=e.target instanceof Ot?e.target.correspondingUseElement:e.target;en.get(t)||qn.removeFromElement(t,ht),an&&an.options.styleCursor&&!(wn||En||Sn)&&(_t.documentElement.style.cursor="")}}function ht(e,t){if(_n)_n&&A(e,an);else{var n;t?n=dt(e,t):an&&(n=j(an.getAction(e))),an&&an.options.styleCursor&&(_t.documentElement.style.cursor=n?Xn[n].cursor:"")}}function gt(e){if((e instanceof V||Rt||!yn||!Bt||e instanceof Bt.constructor)&&!(e.touches&&e.touches.length>=2)){if(kt&&e instanceof kt&&/inertiastart/i.test(e.type))return void e.gestureObject.stop();var t,n=an&&an.options,i=n&&n.inertia;if(wn||En||Sn){if(Qt.active)return;var r,o=n.deltaSource,s=qt[o+"Speed"],a=(new Date).getTime(),c=!1,d=!1,p=!1,u=k(an)&&n.snap.endOnly,g=$(an)&&n.restrict.endOnly,f=0,m=0;if(c=n.inertiaEnabled&&"gesture"!==_n&&bt(i.actions,_n)&&e!==Qt.startEvent,d=c&&a-Nt.timeStamp<50&&s>i.minSpeed&&s>i.endSpeed,c&&!d&&(u||g)){var v={};v.snap=v.restrict=v,u&&(J(e,v),v.locked&&(f+=v.dx,m+=v.dy)),g&&(Q(e,v),v.restricted&&(f+=v.dx,m+=v.dy)),(f||m)&&(p=!0)}if(d||p){if(qn.useAttachEvent?l(Qt.pointerUp,e):Qt.pointerUp=e,Qt.startEvent=r=new V(e,_n,"inertiastart"),an.fire(Qt.startEvent),Qt.target=an,Qt.targetElement=an._element,Qt.t0=a,d){Qt.vx0=qt[o+"VX"],Qt.vy0=qt[o+"VY"],Qt.v0=s,E(Qt);var y,x=h(e),S=b(an,an._element);if(x.x=x.x+(d?Qt.xe:0)-S.x,x.y=x.y+(d?Qt.ye:0)-S.y,y={useStatusXY:!0,x:x.x,y:x.y,dx:0,dy:0,snap:null},y.snap=y,f=m=0,u){var w=J(e,y);w.locked&&(f+=w.dx,m+=w.dy)}if(g){var Y=Q(e,y);Y.restricted&&(f+=Y.dx,m+=Y.dy)}Qt.modifiedXe+=f,Qt.modifiedYe+=m,Qt.i=Rn(z)}else Qt.smoothEnd=!0,Qt.xe=f,Qt.ye=m,Qt.sx=Qt.sy=0,Qt.i=Rn(X);return void(Qt.active=!0)}(u||g)&&Z(e,!0)}if(wn){t=new V(e,"drag","end");var _,T=an._element,D=I(t,T);if(ln=D.dropzone,cn=D.element,an._element=T,ln)_=new V(e,"drop",null,cn,T),t.dropzone=cn;else if(dn){var M=new V(e,"drag","leave",cn,T);dn.fire(M,T),t.dragLeave=pn}var O=G(e,t);an.fire(t),O.leave&&dn.fire(O.leave),O.enter&&ln.fire(O.enter),O.drop&&ln.fire(O.drop),O.deactivate&&N(O.deactivate)}else En?(t=new V(e,"resize","end"),an.fire(t)):Sn&&(t=new V(e,"gesture","end"),an.fire(t));yt.stop()}}function ft(e,t){var n={},i=sn[e.type],r=e.target;t=t?!0:!1;for(var o in e)n[o]=e[o];for(n.originalEvent=e,n.preventDefault=B;r&&r!==_t;){for(var s=0;s<i.selectors.length;s++){var a=i.selectors[s],l=i.contexts[s];if(Et(r,a)&&l===e.currentTarget&&D(l,r)){var c=i.listeners[s];n.currentTarget=r;for(var d=0;d<c.length;d++)if(c[d][1]===t)try{c[d][0](n)}catch(p){Tt.error('Error thrown from delegated listener: "'+a+'" '+e.type+" "+(c[d][0].name?c[d][0].name:"")),Tt.log(p)}}}r=r.parentNode}}function mt(e){return ft.call(this,e,!0)}function vt(){an&&!an.selector&&(an=null),ln=cn=dn=pn=null}function yt(e,t){return en.get(e,t)||new St(e,t)}function xt(e){for(var t in un)e.hasOwnProperty(t)&&typeof e[t]==typeof un[t]&&(this[t]=e[t])}function St(e,n){this._element=e,this._iEvents=this._iEvents||{},a(e)?(_t.querySelector(e),this.selector=e,this._gesture=on,n&&n.context&&(window.Node?n.context instanceof window.Node:t(n.context)||n.context===_t)&&(this._context=n.context)):t(e)&&(Rt?(qn.add(this,zt.down,H),qn.add(this,zt.move,ht),this._gesture=new At,this._gesture.target=e):(qn.add(this,"mousedown",H),qn.add(this,"mousemove",ht),qn.add(this,"touchstart",H),qn.add(this,"touchmove",ht))),en.push(this),this.set(n)}function wt(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1}function bt(e,t){return-1!==wt(e,t)}function Et(e,t,n){return Yt?Yt(e,t,n):e[An](t)}var zt,Xt,Yt,_t=window.document,Tt=window.console,Dt=window.SVGElement||e,Mt=window.SVGSVGElement||e,Ot=window.SVGElementInstance||e,Ct=window.HTMLElement||window.Element,At=window.Gesture||window.MSGesture,Rt=At&&(window.PointerEvent||window.MSPointerEvent),kt=At&&(window.GestureEvent||window.MSGestureEvent),$t=Math.hypot||function(e,t){return Math.sqrt(e*e+t*t)},Pt={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0},Nt={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0},Ft={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0},qt={pageX:0,pageY:0,clientX:0,clientY:0,pageSpeed:0,clientSpeed:0,timeStamp:0},It=[],Gt=[],Vt=0,Bt=null,Ut=null,Lt=0,Kt=null,jt={left:0,right:0,top:0,bottom:0},Wt={left:0,right:0,top:0,bottom:0},Ht={x:0,y:0},Jt={},Qt={active:!1,smoothEnd:!1,target:null,targetElement:null,startEvent:null,pointerUp:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,duration:0,resumeDx:0,resumeDy:0,lambda_v0:0,one_ve_v0:0,i:null},Zt={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0},en=[],tn=[],nn={dropzones:[],elements:[],rects:[]},rn=[],on=null,sn={},an=null,ln=null,cn=null,dn=null,pn=null,un={draggable:!1,dragAxis:"xy",dropzone:!1,accept:null,dropOverlap:"pointer",resizable:!1,squareResize:!1,resizeAxis:"xy",gesturable:!1,pointerMoveTolerance:1,actionChecker:null,styleCursor:!0,preventDefault:"auto",snap:{mode:"grid",endOnly:!1,actions:["drag"],range:1/0,grid:{x:100,y:100},gridOffset:{x:0,y:0},anchors:[],paths:[],elementOrigin:null,arrayTypes:/^anchors$|^paths$|^actions$/,objectTypes:/^grid$|^gridOffset$|^elementOrigin$/,stringTypes:/^mode$/,numberTypes:/^range$/,boolTypes:/^endOnly$/},snapEnabled:!1,restrict:{drag:null,resize:null,gesture:null,endOnly:!1},restrictEnabled:!1,autoScroll:{container:window,margin:60,speed:300,numberTypes:/^margin$|^speed$/},autoScrollEnabled:!1,inertia:{resistance:10,minSpeed:100,endSpeed:10,zeroResumeDelta:!1,smoothEndDuration:300,actions:["drag","resize"],numberTypes:/^resistance$|^minSpeed$|^endSpeed$|^smoothEndDuration$/,arrayTypes:/^actions$/,boolTypes:/^zeroResumeDelta$/},inertiaEnabled:!1,origin:{x:0,y:0},deltaSource:"page",context:_t},hn={x:0,y:0,dx:0,dy:0,realX:0,realY:0,snappedX:0,snappedY:0,anchors:[],paths:[],locked:!1,changed:!1},gn={dx:0,dy:0,restrictedX:0,restrictedY:0,snap:hn,restricted:!1,changed:!1},fn={target:null,i:null,x:0,y:0,scroll:function(){var e=fn.target.options.autoScroll,t=e.container,n=(new Date).getTime(),i=(n-fn.prevTime)/1e3,r=e.speed*i;r>=1&&(t instanceof window.Window?t.scrollBy(fn.x*r,fn.y*r):t&&(t.scrollLeft+=fn.x*r,t.scrollTop+=fn.y*r),fn.prevTime=n),fn.isScrolling&&(kn(fn.i),fn.i=Rn(fn.scroll))},edgeMove:function(e){if(an&&an.options.autoScrollEnabled&&(wn||En)){var t,n,i,r,o=an.options.autoScroll;if(o.container instanceof window.Window)r=e.clientX<fn.margin,t=e.clientY<fn.margin,n=e.clientX>o.container.innerWidth-fn.margin,i=e.clientY>o.container.innerHeight-fn.margin;else{var s=m(o.container);r=e.clientX<s.left+fn.margin,t=e.clientY<s.top+fn.margin,n=e.clientX>s.right-fn.margin,i=e.clientY>s.bottom-fn.margin}fn.x=n?1:r?-1:0,fn.y=i?1:t?-1:0,fn.isScrolling||(fn.margin=o.margin,fn.speed=o.speed,fn.start(an))}},isScrolling:!1,prevTime:0,start:function(e){fn.isScrolling=!0,kn(fn.i),fn.target=e,fn.prevTime=(new Date).getTime(),fn.i=Rn(fn.scroll)},stop:function(){fn.isScrolling=!1,kn(fn.i)}},mn="ontouchstart"in window||window.DocumentTouch&&_t instanceof window.DocumentTouch,vn=mn?20:10,yn=!1,xn=!1,Sn=!1,wn=!1,bn=!1,En=!1,zn="xy",Xn={drag:{cursor:"move",start:rt,move:ot},resizex:{cursor:"e-resize",start:st,move:at},resizey:{cursor:"s-resize",start:st,move:at},resizexy:{cursor:"se-resize",start:st,move:at},gesture:{cursor:"",start:lt,move:ct}},Yn={drag:!0,resize:!0,gesture:!0},_n=null,Tn="onmousewheel"in _t?"mousewheel":"wheel",Dn=["dragstart","dragmove","draginertiastart","dragend","dragenter","dragleave","dropactivate","dropdeactivate","dropmove","drop","resizestart","resizemove","resizeinertiastart","resizeend","gesturestart","gesturemove","gestureinertiastart","gestureend","tap","doubletap"],Mn={},On={directBind:0,onevent:1,globalBind:2},Cn="Opera"==navigator.appName&&mn&&navigator.userAgent.match("Presto"),An="matchesSelector"in Element.prototype?"matchesSelector":"webkitMatchesSelector"in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector"in Element.prototype?"mozMatchesSelector":"oMatchesSelector"in Element.prototype?"oMatchesSelector":"msMatchesSelector",Rn=window.requestAnimationFrame,kn=window.cancelAnimationFrame,$n={_element:window,events:{}},Pn={_element:_t,events:{}},Nn={_element:window.parent,events:{}},Fn={_element:null,events:{}},qn=function(){function e(e,t,a,u){var h=wt(c,e),g=d[h];if(g||(g={events:{},typeCount:0},h=c.push(e)-1,d.push(g),p.push(o?{supplied:[],wrapped:[],useCount:[]}:null)),g.events[t]||(g.events[t]=[],g.typeCount++),!bt(g.events[t],a)){var f;if(o){var m=p[h],v=wt(m.supplied,a),y=m.wrapped[v]||function(t){t.immediatePropagationStopped||(t.target=t.srcElement,t.currentTarget=e,t.preventDefault=t.preventDefault||n,t.stopPropagation=t.stopPropagation||i,t.stopImmediatePropagation=t.stopImmediatePropagation||r,/mouse|click/.test(t.type)&&(t.pageX=t.clientX+_t.documentElement.scrollLeft,t.pageY=t.clientY+_t.documentElement.scrollTop),a(t))};f=e[s](l+t,y,Boolean(u)),-1===v?(m.supplied.push(a),m.wrapped.push(y),m.useCount.push(1)):m.useCount[v]++}else f=e[s](t,a,u||!1);return g.events[t].push(a),f}}function t(e,n,i,r){var s,u,h,g=wt(c,e),f=d[g],m=i;if(f&&f.events)if(o&&(u=p[g],h=wt(u.supplied,i),m=u.wrapped[h]),"all"!==n){if(f.events[n]){var v=f.events[n].length;if("all"===i)for(s=0;v>s;s++)t(e,n,f.events[n][s],Boolean(r));else for(s=0;v>s;s++)if(f.events[n][s]===i){e[a](l+n,m,r||!1),f.events[n].splice(s,1),o&&u&&(u.useCount[h]--,0===u.useCount[h]&&(u.supplied.splice(h,1),u.wrapped.splice(h,1),u.useCount.splice(h,1)));break}f.events[n]&&0===f.events[n].length&&(f.events[n]=null,f.typeCount--)}f.typeCount||(d.splice(g),c.splice(g),p.splice(g))}else for(n in f.events)f.events.hasOwnProperty(n)&&t(e,n,"all")}function n(){this.returnValue=!1}function i(){this.cancelBubble=!0}function r(){this.cancelBubble=!0,this.immediatePropagationStopped=!0}var o="attachEvent"in window&&!("addEventListener"in window),s=o?"attachEvent":"addEventListener",a=o?"detachEvent":"removeEventListener",l=o?"on":"",c=[],d=[],p=[];return{add:function(t,n,i,r){e(t._element,n,i,r)},remove:function(e,n,i,r){t(e._element,n,i,r)},addToElement:e,removeFromElement:t,useAttachEvent:o,indexOf:wt}}();V.prototype={preventDefault:e,stopImmediatePropagation:function(){this.immediatePropagationStopped=this.propagationStopped=!0},stopPropagation:function(){this.propagationStopped=!0}},en.indexOfElement=tn.indexOfElement=function(e,t){for(var n=0;n<this.length;n++){var i=this[n];if(i.selector===e&&i._context===(t||_t)||!i.selector&&i._element===e)return n}return-1},en.get=tn.get=function(e,t){return this[this.indexOfElement(e,t&&t.context)]},en.forEachSelector=function(e){for(var t=0;t<this.length;t++){var n=this[t];if(n.selector){var i=e(n,n.selector,n._context,t,this);if(void 0!==i)return i}}},xt.prototype=un,St.prototype={setOnEvents:function(e,t){if("drop"===e){var n=t.ondrop||t.onDrop||t.drop,i=t.ondropactivate||t.onDropActivate||t.dropactivate,o=t.ondropdeactivate||t.onDropDeactivate||t.dropdeactivate,s=t.ondragenter||t.onDropEnter||t.dragenter,a=t.ondragleave||t.onDropLeave||t.dragleave,l=t.ondropmove||t.onDropMove||t.dropmove;r(n)&&(this.ondrop=n),r(i)&&(this.ondropactivate=i),r(o)&&(this.ondropdeactivate=o),r(s)&&(this.ondragenter=s),r(a)&&(this.ondragleave=a),r(l)&&(this.ondropmove=l)
}else{var c=t.onstart||t.onStart||t.start,d=t.onmove||t.onMove||t.move,p=t.onend||t.onEnd||t.end,u=t.oninertiastart||t.onInertiaStart||t.inertiastart;e="on"+e,r(c)&&(this[e+"start"]=c),r(d)&&(this[e+"move"]=d),r(p)&&(this[e+"end"]=p),r(u)&&(this[e+"inertiastart"]=u)}return this},draggable:function(e){return n(e)?(this.options.draggable=!0,this.setOnEvents("drag",e),/^x$|^y$|^xy$/.test(e.axis)?this.options.dragAxis=e.axis:null===e.axis&&delete this.options.dragAxis,this):s(e)?(this.options.draggable=e,this):null===e?(delete this.options.draggable,this):this.options.draggable},dropzone:function(e){if(n(e))return this.options.dropzone=!0,this.setOnEvents("drop",e),this.accept(e.accept),/^(pointer|center)$/.test(e.overlap)?this.options.dropOverlap=e.overlap:o(e.overlap)&&(this.options.dropOverlap=Math.max(Math.min(1,e.overlap),0)),this._dropElements=this.selector?null:[this._element],tn.push(this),this;if(s(e)){if(e)this._dropElements=this.selector?null:[this._element],tn.push(this);else{var t=wt(tn,this);-1!==t&&tn.splice(t,1)}return this.options.dropzone=e,this}return null===e?(delete this.options.dropzone,this):this.options.dropzone},dropCheck:function(e,t,n,i){if(!(i=i||this.getRect()))return!1;var r=this.options.dropOverlap;if("pointer"===r){var s,a,l=h(e),c=b(t,n);return l.x+=c.x,l.y+=c.y,s=l.x>i.left&&l.x<i.right,a=l.y>i.top&&l.y<i.bottom,s&&a}var d=t.getRect(n);if("center"===r){var p=d.left+d.width/2,u=d.top+d.height/2;return p>=i.left&&p<=i.right&&u>=i.top&&u<=i.bottom}if(o(r)){var g=Math.max(0,Math.min(i.right,d.right)-Math.max(i.left,d.left))*Math.max(0,Math.min(i.bottom,d.bottom)-Math.max(i.top,d.top)),f=g/(d.width*d.height);return f>=r}},dropChecker:function(e){return r(e)?(this.dropCheck=e,this):this.dropCheck},accept:function(e){return t(e)?(this.options.accept=e,this):a(e)?(_t.querySelector(e),this.options.accept=e,this):null===e?(delete this.options.accept,this):this.options.accept},resizable:function(e){return n(e)?(this.options.resizable=!0,this.setOnEvents("resize",e),/^x$|^y$|^xy$/.test(e.axis)?this.options.resizeAxis=e.axis:null===e.axis&&(this.options.resizeAxis=un.resizeAxis),this):s(e)?(this.options.resizable=e,this):this.options.resizable},resizeable:e,squareResize:function(e){return s(e)?(this.options.squareResize=e,this):null===e?(delete this.options.squareResize,this):this.options.squareResize},gesturable:function(e){return n(e)?(this.options.gesturable=!0,this.setOnEvents("gesture",e),this):s(e)?(this.options.gesturable=e,this):null===e?(delete this.options.gesturable,this):this.options.gesturable},gestureable:e,autoScroll:function(e){var i=un.autoScroll;if(n(e)){var r=this.options.autoScroll;return r===i&&(r=this.options.autoScroll={margin:i.margin,distance:i.distance,interval:i.interval,container:i.container}),r.margin=this.validateSetting("autoScroll","margin",e.margin),r.speed=this.validateSetting("autoScroll","speed",e.speed),r.container=t(e.container)||e.container instanceof window.Window?e.container:i.container,this.options.autoScrollEnabled=!0,this.options.autoScroll=r,this}return s(e)?(this.options.autoScrollEnabled=e,this):null===e?(delete this.options.autoScrollEnabled,delete this.options.autoScroll,this):this.options.autoScrollEnabled?this.options.autoScroll:!1},snap:function(e){var t=un.snap;if(n(e)){var i=this.options.snap;return i===t&&(i={}),i.mode=this.validateSetting("snap","mode",e.mode),i.endOnly=this.validateSetting("snap","endOnly",e.endOnly),i.actions=this.validateSetting("snap","actions",e.actions),i.range=this.validateSetting("snap","range",e.range),i.paths=this.validateSetting("snap","paths",e.paths),i.grid=this.validateSetting("snap","grid",e.grid),i.gridOffset=this.validateSetting("snap","gridOffset",e.gridOffset),i.anchors=this.validateSetting("snap","anchors",e.anchors),i.elementOrigin=this.validateSetting("snap","elementOrigin",e.elementOrigin),this.options.snapEnabled=!0,this.options.snap=i,this}return s(e)?(this.options.snapEnabled=e,this):null===e?(delete this.options.snapEnabled,delete this.options.snap,this):this.options.snapEnabled?this.options.snap:!1},inertia:function(e){var t=un.inertia;if(n(e)){var i=this.options.inertia;return i===t&&(i=this.options.inertia={resistance:t.resistance,minSpeed:t.minSpeed,endSpeed:t.endSpeed,actions:t.actions,zeroResumeDelta:t.zeroResumeDelta,smoothEndDuration:t.smoothEndDuration}),i.resistance=this.validateSetting("inertia","resistance",e.resistance),i.minSpeed=this.validateSetting("inertia","minSpeed",e.minSpeed),i.endSpeed=this.validateSetting("inertia","endSpeed",e.endSpeed),i.actions=this.validateSetting("inertia","actions",e.actions),i.zeroResumeDelta=this.validateSetting("inertia","zeroResumeDelta",e.zeroResumeDelta),i.smoothEndDuration=this.validateSetting("inertia","smoothEndDuration",e.smoothEndDuration),this.options.inertiaEnabled=!0,this.options.inertia=i,this}return s(e)?(this.options.inertiaEnabled=e,this):null===e?(delete this.options.inertiaEnabled,delete this.options.inertia,this):this.options.inertiaEnabled?this.options.inertia:!1},getAction:function(e){var t=this.defaultActionChecker(e);return this.options.actionChecker&&(t=this.options.actionChecker(e,t,this)),t},defaultActionChecker:K,actionChecker:function(e){return r(e)?(this.options.actionChecker=e,this):null===e?(delete this.options.actionChecker,this):this.options.actionChecker},getRect:function(e){return e=e||this._element,this.selector&&!t(e)&&(e=this._context.querySelector(this.selector)),m(e)},rectChecker:function(e){return r(e)?(this.getRect=e,this):null===e?(delete this.options.getRect,this):this.getRect},styleCursor:function(e){return s(e)?(this.options.styleCursor=e,this):null===e?(delete this.options.styleCursor,this):this.options.styleCursor},preventDefault:function(e){return s(e)||"auto"===e?(this.options.preventDefault=e,this):null===e?(delete this.options.preventDefault,this):this.options.preventDefault},origin:function(e){return n(e)||/^parent$|^self$/.test(e)?(this.options.origin=e,this):null===e?(delete this.options.origin,this):this.options.origin},deltaSource:function(e){return"page"===e||"client"===e?(this.options.deltaSource=e,this):null===e?(delete this.options.deltaSource,this):this.options.deltaSource},restrict:function(e){if(void 0===e)return this.options.restrict;if(s(e))un.restrictEnabled=e;else if(n(e)){var t={};(n(e.drag)||/^parent$|^self$/.test(e.drag))&&(t.drag=e.drag),(n(e.resize)||/^parent$|^self$/.test(e.resize))&&(t.resize=e.resize),(n(e.gesture)||/^parent$|^self$/.test(e.gesture))&&(t.gesture=e.gesture),s(e.endOnly)&&(t.endOnly=e.endOnly),n(e.elementRect)&&(t.elementRect=e.elementRect),this.options.restrictEnabled=!0,this.options.restrict=t}else null===e&&(delete this.options.restrict,delete this.options.restrictEnabled);return this},context:function(){return this._context},_context:_t,ignoreFrom:function(e){return a(e)?(_t.querySelector(e),this.options.ignoreFrom=e,this):t(e)?(this.options.ignoreFrom=e,this):null===e?(delete this.options.ignoreFrom,this):this.options.ignoreFrom},allowFrom:function(e){return a(e)?(_t.querySelector(e),this.options.allowFrom=e,this):t(e)?(this.options.allowFrom=e,this):null===e?(delete this.options.allowFrom,this):this.options.allowFrom},validateSetting:function(e,r,l){var c=un[e],d=this.options[e];if(void 0!==c&&void 0!==c[r]){if("objectTypes"in c&&c.objectTypes.test(r))return n(l)?l:r in d&&n(d[r])?d[r]:c[r];if("arrayTypes"in c&&c.arrayTypes.test(r))return i(l)?l:r in d&&i(d[r])?d[r]:c[r];if("stringTypes"in c&&c.stringTypes.test(r))return a(l)?l:r in d&&a(d[r])?d[r]:c[r];if("numberTypes"in c&&c.numberTypes.test(r))return o(l)?l:r in d&&o(d[r])?d[r]:c[r];if("boolTypes"in c&&c.boolTypes.test(r))return s(l)?l:r in d&&s(d[r])?d[r]:c[r];if("elementTypes"in c&&c.elementTypes.test(r))return t(l)?l:r in d&&t(d[r])?d[r]:c[r]}return null},element:function(){return this._element},fire:function(e){if(!e||!e.type||!bt(Dn,e.type))return this;for(var t,n,i=0,o=0,s="on"+e.type;3>i;)try{switch(i){case On.directBind:if(e.type in this._iEvents){for(t=this._iEvents[e.type],n=t.length;n>o&&!e.immediatePropagationStopped;o++)t[o](e);break}break;case On.onevent:r(this[s])&&this[s](e);break;case On.globalBind:if(e.type in Mn&&(t=Mn[e.type]))for(n=t.length;n>o&&!e.immediatePropagationStopped;o++)t[o](e)}if(e.propagationStopped)break;o=0,i++}catch(a){Tt.error("Error thrown from "+e.type+" listener"),Tt.error(a),o++,i===On.onevent&&i++}return this},on:function(e,t,n){if("wheel"===e&&(e=Tn),n=n?!0:!1,bt(Dn,e))e in this._iEvents?bt(this._iEvents[e],t)||this._iEvents[e].push(t):this._iEvents[e]=[t];else if(this.selector){sn[e]||(sn[e]={selectors:[],contexts:[],listeners:[]},qn.addToElement(this._context,e,ft),qn.addToElement(this._context,e,mt,!0));var i,r=sn[e];for(i=r.selectors.length-1;i>=0&&(r.selectors[i]!==this.selector||r.contexts[i]!==this._context);i--);-1===i&&(i=r.selectors.length,r.selectors.push(this.selector),r.contexts.push(this._context),r.listeners.push([])),r.listeners[i].push([t,n])}else qn.add(this,e,t,n);return this},off:function(e,t,n){var i,r=-1;if(n=n?!0:!1,"wheel"===e&&(e=Tn),bt(Dn,e))i=this._iEvents[e],i&&-1!==(r=wt(i,t))&&this._iEvents[e].splice(r,1);else if(this.selector){var o=sn[e],s=!1;if(!o)return this;for(r=o.selectors.length-1;r>=0;r--)if(o.selectors[r]===this.selector&&o.contexts[r]===this._context){for(var a=o.listeners[r],l=a.length-1;l>=0;l--){var c=a[l][0],d=a[l][1];if(c===t&&d===n){a.splice(l,1),a.length||(o.selectors.splice(r,1),o.contexts.splice(r,1),o.listeners.splice(r,1),qn.removeFromElement(this._context,e,ft),qn.removeFromElement(this._context,e,mt,!0),o.selectors.length||(sn[e]=null)),s=!0;break}}if(s)break}}else qn.remove(this,t,n);return this},set:function(e){e&&n(e)||(e={}),this.options=new xt(e),this.draggable("draggable"in e?e.draggable:this.options.draggable),this.dropzone("dropzone"in e?e.dropzone:this.options.dropzone),this.resizable("resizable"in e?e.resizable:this.options.resizable),this.gesturable("gesturable"in e?e.gesturable:this.options.gesturable);for(var t=["accept","actionChecker","allowFrom","autoScroll","deltaSource","dropChecker","ignoreFrom","inertia","origin","preventDefault","rectChecker","restrict","snap","styleCursor"],i=0,r=t.length;r>i;i++){var o=t[i];o in e&&this[o](e[o])}return this},unset:function(){if(qn.remove(this,"all"),a(this.selector))for(var e in sn)for(var t=sn[e],n=0;n<t.selectors.length;n++){t.selectors[n]===this.selector&&t.contexts[n]===this._context&&(t.selectors.splice(n,1),t.contexts.splice(n,1),t.listeners.splice(n,1),t.selectors.length||(sn[e]=null)),qn.removeFromElement(this._context,e,ft),qn.removeFromElement(this._context,e,mt,!0);break}else qn.remove(this,"all"),this.options.styleCursor&&(this._element.style.cursor=""),this._gesture&&(this._gesture.target=null);return this.dropzone(!1),en.splice(wt(en,this),1),yt}},St.prototype.gestureable=St.prototype.gesturable,St.prototype.resizeable=St.prototype.resizable,yt.isSet=function(e,t){return-1!==en.indexOfElement(e,t&&t.context)},yt.on=function(e,t,n){return bt(Dn,e)?Mn[e]?bt(Mn[e],t)||Mn[e].push(t):Mn[e]=[t]:qn.add(Pn,e,t,n),yt},yt.off=function(e,t,n){if(bt(Dn,e)){var i;e in Mn&&-1!==(i=wt(Mn[e],t))&&Mn[e].splice(i,1)}else qn.remove(Pn,e,t,n);return yt},yt.simulate=function(t,n,i){var r,o={};return"resize"===t&&(t="resizexy"),t in Xn?(i?l(o,i):(r=an._element instanceof Dt?n.getBoundingClientRect():r=n.getClientRects()[0],"drag"===t?(o.pageX=r.left+r.width/2,o.pageY=r.top+r.height/2):(o.pageX=r.right,o.pageY=r.bottom)),o.target=o.currentTarget=n,o.preventDefault=o.stopPropagation=e,H(o,t),yt):yt},yt.enableDragging=function(e){return null!==e&&void 0!==e?(Yn.drag=e,yt):Yn.drag},yt.enableResizing=function(e){return null!==e&&void 0!==e?(Yn.resize=e,yt):Yn.resize},yt.enableGesturing=function(e){return null!==e&&void 0!==e?(Yn.gesture=e,yt):Yn.gesture},yt.eventTypes=Dn,yt.debug=function(){return{target:an,dragging:wn,resizing:En,gesturing:Sn,prepared:_n,matches:rn,prevCoords:Pt,downCoords:Ft,pointerIds:It,pointerMoves:Gt,addPointer:et,removePointer:tt,recordPointers:nt,recordTouches:it,snap:hn,restrict:gn,inertia:Qt,downTime:Vt,downEvent:Bt,prevEvent:Ut,Interactable:St,IOptions:xt,interactables:en,dropzones:tn,pointerIsDown:yn,defaultOptions:un,defaultActionChecker:K,actions:Xn,dragMove:ot,resizeMove:at,gestureMove:ct,pointerUp:gt,pointerDown:H,pointerMove:Z,pointerHover:ht,events:qn,globalEvents:Mn,delegatedEvents:sn}},yt.getTouchAverage=y,yt.getTouchBBox=x,yt.getTouchDistance=S,yt.getTouchAngle=w,yt.getElementRect=m,yt.margin=function(e){return o(e)?(vn=e,yt):vn},yt.styleCursor=function(e){return s(e)?(un.styleCursor=e,yt):un.styleCursor},yt.autoScroll=function(e){var i=un.autoScroll;return n(e)?(un.autoScrollEnabled=!0,o(e.margin)&&(i.margin=e.margin),o(e.speed)&&(i.speed=e.speed),i.container=t(e.container)||e.container instanceof window.Window?e.container:i.container,yt):s(e)?(un.autoScrollEnabled=e,yt):un.autoScrollEnabled?i:!1},yt.snap=function(e){var t=un.snap;return n(e)?(un.snapEnabled=!0,a(e.mode)&&(t.mode=e.mode),s(e.endOnly)&&(t.endOnly=e.endOnly),o(e.range)&&(t.range=e.range),i(e.actions)&&(t.actions=e.actions),i(e.anchors)&&(t.anchors=e.anchors),n(e.grid)&&(t.grid=e.grid),n(e.gridOffset)&&(t.gridOffset=e.gridOffset),n(e.elementOrigin)&&(t.elementOrigin=e.elementOrigin),yt):s(e)?(un.snapEnabled=e,yt):{enabled:un.snapEnabled,mode:t.mode,actions:t.actions,grid:t.grid,gridOffset:t.gridOffset,anchors:t.anchors,paths:t.paths,range:t.range,locked:hn.locked,x:hn.snappedX,y:hn.snappedY,realX:hn.realX,realY:hn.realY,dx:hn.dx,dy:hn.dy}},yt.inertia=function(e){var t=un.inertia;return n(e)?(un.inertiaEnabled=!0,o(e.resistance)&&(t.resistance=e.resistance),o(e.minSpeed)&&(t.minSpeed=e.minSpeed),o(e.endSpeed)&&(t.endSpeed=e.endSpeed),o(e.smoothEndDuration)&&(t.smoothEndDuration=e.smoothEndDuration),s(e.zeroResumeDelta)&&(t.zeroResumeDelta=e.zeroResumeDelta),i(e.actions)&&(t.actions=e.actions),yt):s(e)?(un.inertiaEnabled=e,yt):{enabled:un.inertiaEnabled,resistance:t.resistance,minSpeed:t.minSpeed,endSpeed:t.endSpeed,actions:t.actions,zeroResumeDelta:t.zeroResumeDelta}},yt.supportsTouch=function(){return mn},yt.currentAction=function(){return wn&&"drag"||En&&"resize"||Sn&&"gesture"||null},yt.stop=function(e){if(wn||En||Sn){if(fn.stop(),rn=[],an.options.styleCursor&&(_t.documentElement.style.cursor=""),an._gesture&&an._gesture.stop(),e&&r(e.preventDefault)&&A(e,an),wn){nn.dropzones=nn.elements=nn.rects=null;for(var t=0;t<tn.length;t++)tn[t].selector&&(tn[t]._dropElements=null)}vt()}return It.splice(0),Gt.splice(0),yn=hn.locked=wn=En=Sn=!1,_n=Ut=null,Qt.resumeDx=Qt.resumeDy=0,yt},yt.dynamicDrop=function(e){return s(e)?(bn=e,yt):bn},yt.deltaSource=function(e){return"page"===e||"client"===e?(un.deltaSource=e,this):un.deltaSource},yt.restrict=function(e){var t=un.restrict;return void 0===e?un.restrict:(s(e)?un.restrictEnabled=e:n(e)?((n(e.drag)||/^parent$|^self$/.test(e.drag))&&(t.drag=e.drag),(n(e.resize)||/^parent$|^self$/.test(e.resize))&&(t.resize=e.resize),(n(e.gesture)||/^parent$|^self$/.test(e.gesture))&&(t.gesture=e.gesture),s(e.endOnly)&&(t.endOnly=e.endOnly),n(e.elementRect)&&(t.elementRect=e.elementRect),un.restrictEnabled=!0):null===e&&(t.drag=t.resize=t.gesture=null,t.endOnly=!1),this)},yt.pointerMoveTolerance=function(e){return o(e)?(un.pointerMoveTolerance=e,this):un.pointerMoveTolerance},Rt?(zt=Rt===window.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"MSPointerOver",out:"MSPointerOut",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"},Xt=kt===window.MSGestureEvent?{start:"MSGestureStart",change:"MSGestureChange",inertia:"MSInertiaStart",end:"MSGestureEnd"}:{start:"gesturestart",change:"gesturechange",inertia:"inertiastart",end:"gestureend"},qn.add(Pn,zt.up,L),qn.add(Pn,zt.down,W),qn.add(Pn,Xt.change,Z),qn.add(Pn,Xt.end,gt),qn.add(Pn,Xt.inertia,gt),qn.add(Pn,zt.over,pt),qn.add(Pn,zt.out,ut),qn.add(Pn,zt.move,nt),qn.add(Pn,zt.up,nt),qn.add(Pn,zt.cancel,nt),qn.add(Pn,zt.up,function(){wn||En||Sn||(yn=!1)}),on=new At,on.target=_t.documentElement):(qn.add(Pn,"mouseup",L),qn.add(Pn,"touchend",L),qn.add(Pn,"mousedown",W),qn.add(Pn,"mousemove",Z),qn.add(Pn,"mouseup",gt),qn.add(Pn,"mouseover",pt),qn.add(Pn,"mouseout",ut),qn.add(Pn,"touchmove",it),qn.add(Pn,"touchend",it),qn.add(Pn,"touchcancel",it),qn.add(Pn,"touchstart",W),qn.add(Pn,"touchmove",Z),qn.add(Pn,"touchend",gt),qn.add(Pn,"touchcancel",gt)),qn.add($n,"blur",gt);try{window.frameElement&&(Fn._element=window.frameElement.ownerDocument,qn.add(Fn,"mouseup",gt),qn.add(Fn,"touchend",gt),qn.add(Fn,"touchcancel",gt),qn.add(Fn,"pointerup",gt),qn.add(Fn,"MSPointerUp",gt),qn.add(Nn,"blur",gt))}catch(In){yt.windowParentError=In}qn.add(Pn,"selectstart",function(e){(wn||En||Sn)&&A(e,an)}),An in Element.prototype&&r(Element.prototype[An])||(Yt=function(e,t,n){n=n||e.parentNode.querySelectorAll(t);for(var i=0,r=n.length;r>i;i++)if(n[i]===e)return!0;return!1}),function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)Rn=window[t[n]+"RequestAnimationFrame"],kn=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];Rn||(Rn=function(t){var n=(new Date).getTime(),i=Math.max(0,16-(n-e)),r=window.setTimeout(function(){t(n+i)},i);return e=n+i,r}),kn||(kn=function(e){clearTimeout(e)})}(),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=yt),exports.interact=yt):"function"==typeof define&&define.amd?define("interact",function(){return yt}):window.interact=yt}();
